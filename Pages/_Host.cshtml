@page
@using Rambles.Data
@inject RambleService RambleService

@{
    Layout = "_Layout";

    await RambleService.Refresh();
    Ramble ramble = RambleService.GetRambleByUrl(Request.Path);
    ViewData["Title"] = ramble.Title;
    if (ramble.Is404)
        Response.StatusCode = 404;
}

@Html.Raw(ramble.Text)